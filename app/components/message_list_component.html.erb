<div>
  <header class="px-4 py-3 border-b border-gray-200">
    <div class="flex items-center justify-between">
      <h2 class="text-lg font-semibold text-gray-900 capitalize"><%= @folder %></h2>
      <span class="text-sm text-gray-500"><%= @messages.size %> messages</span>
    </div>
  </header>

  <%= render FilterChipsComponent.new(
    current_path: current_folder_path,
    active_filters: @active_filters,
    labels: @labels
  ) %>

  <% if @messages.any? %>
    <script type="text/x-template" id="<%= MessageRowComponent.template_element_id %>"><%= MessageRowComponent.encoded_template %></script>
    <div id="message_items" data-controller="list-toggle" data-list-toggle-active-class="bg-blue-50" data-list-toggle-inactive-class="bg-white" >
      <% @messages.each do |message| %>
        <div id="<%= dom_id(message) %>"
             class="<%= message.id == @selected_id ? 'bg-blue-50' : 'bg-white' %>"
             data-list-toggle-target="item"
             data-controller="live-renderer"
             data-live-renderer-template-id-value="<%= MessageRowComponent.template_element_id %>"
             <% if signed_stream_name %>data-live-renderer-stream-value="<%= signed_stream_name %>"<% end %>
             data-live-renderer-action-url-value="<%= live_component_actions_path %>"
             data-live-renderer-action-token-value="<%= MessageRowComponent.live_action_token(message) %>"
             data-live-renderer-state-value="<%= client_state_for(message) %>"
             data-live-renderer-data-value="<%= initial_data_for(message) %>">
          <%= render MessageRowComponent.new(message: message, selected: message.id == @selected_id) %>
        </div>
      <% end %>
    </div>
  <% else %>
    <%= render EmptyStateComponent.new(title: "No messages", description: "This folder is empty.") %>
  <% end %>
</div>
